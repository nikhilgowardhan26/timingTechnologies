<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timing</title>
    <link rel="stylesheet" href="../RequestDemo/RequestPage.css">
    <link rel="stylesheet" href="../header/header.css">
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../header/header.css">
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="../node_modules/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="icon" type="image/x-icon" href="../images/favicon/T_favicon.png">
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script src="../node_modules/axios/dist/axios.js"></script>
    <style>
        .form-error {
            color: red;
        }
    </style>
    <script>


        function submitForm() {
            const company_name = document.getElementById('company_name').value.trim();
            const mobile = document.getElementById('mobile').value.trim();
            const email = document.getElementById('email').value.trim();
            const first_name = document.getElementById('first_name').value.trim();
            const last_name = document.getElementById('last_name').value.trim();
            const state = document.getElementById('state').value.trim();
            const website = document.getElementById('website').value.trim();

            let isValid = true;
            document.querySelectorAll('.form-error').forEach(el => el.textContent = ''); 

            if (!first_name) {
                document.getElementById('firstnameError').textContent = 'first Name is required';
                isValid = false;
            }
            if (!last_name) {
                document.getElementById('lastnameError').textContent = ' Last Name is required';
                isValid = false;
            }
            if (!company_name) {
                document.getElementById('companyError').textContent = 'Company name is required';
                isValid = false;
            }
            if (!website) {
                document.getElementById('websiteError').textContent = 'website name is required';
                isValid = false;
            }

            const phoneRegex = /^\d{1,10}$/; // Regex for 1 to 10 digits
            if (!mobile) {
                document.getElementById('mobileError').textContent = 'Phone number is required';
                isValid = false;
            } else if (!phoneRegex.test(mobile)) {
                document.getElementById('mobileError').textContent = 'Phone number must be up to 10 digits';
                isValid = false;
            }

            if (!email || !/\S+@\S+\.\S+/.test(email)) {
                document.getElementById('emailError').textContent = 'Valid email is required';
                isValid = false;
            }
            
            if (!state) {
                document.getElementById('stateError').textContent = 'state is required';
                isValid = false;
            }

            if (!isValid) {
                return; 
            }

            const formData = {
                company_name : company_name,
                mobile: mobile,
                email : email,
                first_name : first_name,
                last_name : last_name,
                state : state,
                website : website,
            }

            

            axios.post('https://www.timingindia.org/ttipl/api/demoRequest.php', formData)
                .then(response => {
                    console.log(response.data);
                    document.getElementById('myForm').reset();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    const toast = new bootstrap.Toast(document.getElementById('successToast'));
                    toast.show();
                })
                .catch(error => {
                    alert('An error occurred while submitting the form.');
                    console.error(error);
                });
            
        }

    </script>


</head>

<body>
    <div id="header-content"></div>
    <div class="margin-top  mb-5">
        <div class="container rounded-5 p-3" style="box-shadow: 0px 10px 25px 0px #00003314;">
            <h3 class="letus text-center my-4 fw-bold">Let us show you <span class="text-danger whatwe">what we can
                    do.</span></h3>
            <div class="mt-5 w-75" style="margin: 0 auto;">

                <form id="myForm"  onsubmit="return false">
                    <div class="form-floating " data-aos="fade-up">
                        <input type="text" class="form-control" name="company_name" id="company_name"
                            placeholder="name@example.com">
                        <label for="floatingInput" class="name">Company Name:<span class="text-danger">*</span></label>
                        <div class="form-error" id="companyError"></div>
                    </div>
                    <br>
                    <div class="form-floating " data-aos="fade-up">
                        <input type="email" class="form-control" id="email" name="email" placeholder="name@example.com">
                        <label for="floatingInput" class="name">Work Email Address:<span
                                class="text-danger">*</span></label>
                        <div class="form-error" id="emailError"></div>
                    </div>
                    <br>
                    <div class="form-floating ">
                        <input type="text" class="form-control" id="first_name" name="first_name"
                            placeholder="name@example.com">
                        <label for="floatingInput" class="name">First Name:<span class="text-danger">*</span></label>
                        <div class="form-error" id="firstnameError"></div>
                    </div>
                    <br>
                    <div class="form-floating ">
                        <input type="text" class="form-control" id="last_name" name="last_name"
                            placeholder="name@example.com">
                        <label for="floatingInput" class="name">Last Name:<span class="text-danger">*</span></label>
                        <div class="form-error" id="lastnameError"></div>
                    </div>
                    <br>
                    <div class="form-floating ">
                        <input type="text" class="form-control" required id="mobile" name="mobile"  placeholder="Phone Number">
                        <label for="floatingInput" class="name">Phone Number*</label>
                        <div class="form-error" id="mobileError"></div>
                    </div>
                    <br>
                    <div class="form-floating ">
                        
                        <select class="form-select" id="state" name="state" required aria-label="Floating label select example">
                            <option value="" selected>please select the state</option>
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chhattisgarh">Chhattisgarh</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                        <label for="floatingInput" class="name">State:<span class="text-danger">*</span></label>
                        <div class="form-error" id="stateError"></div>
                    </div>
                    
                    <br>
                    <div class="form-floating">
                        <input type="text" class="form-control " name="website" id="website" placeholder="Website*">
                        <label for="floatingPassword" class="name">Website:<span class="text-danger">*</span></label>
                        <div class="form-error" id="websiteError"></div>
                    </div>
                    <br>
                    <br>
                    <div class="form-floating my-3">
                        <button class="bg-danger w-100 reqBtn" type="button" onclick="submitForm()">Request a
                            Demo</button>
                    </div>
                </form>
            </div>
            
        </div>
    </div>

    <!-- footer  -->
    <div id="footer-content"></div>
    <!-- footer  -->

     <!-- toast -->
     <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="successToast" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto text-success">Success</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Your form has been submitted successfully!
            </div>
        </div>
    </div>
    <!-- toast -->


    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.js"></script>

    <script type="text/javascript">
        $("#header-content").load('../header/header.html');
        $("#footer-content").load('../footer/footer.html');

    </script>
</body>

</html>